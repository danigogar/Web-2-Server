### Variables
@baseUrl = http://localhost:3000
@apiUrl = {{baseUrl}}/api/todos

###############################################
# HEALTH CHECK & INFO
###############################################

### Health Check
GET {{baseUrl}}/health

### API Info
GET {{baseUrl}}/api

###############################################
# OBTENER TODOS (GET)
###############################################

### Obtener todas las tareas
GET {{apiUrl}}

### Filtrar por completadas
GET {{apiUrl}}?completed=true

### Filtrar por pendientes
GET {{apiUrl}}?completed=false

### Filtrar por prioridad alta
GET {{apiUrl}}?priority=high

### Filtrar por prioridad media
GET {{apiUrl}}?priority=medium

### Filtrar por prioridad baja
GET {{apiUrl}}?priority=low

### Filtrar pendientes de alta prioridad
GET {{apiUrl}}?completed=false&priority=high

###############################################
# OBTENER UNA TAREA (GET BY ID)
###############################################

### Obtener tarea con ID 1
GET {{apiUrl}}/1

### Obtener tarea con ID 2
GET {{apiUrl}}/2

### Obtener tarea inexistente (debería dar 404)
GET {{apiUrl}}/999

###############################################
# CREAR TAREAS (POST)
###############################################

### Crear tarea básica
POST {{apiUrl}}
Content-Type: application/json

{
  "title": "Nueva tarea de prueba",
  "description": "Esta es una tarea creada desde HTTP Client",
  "priority": "high"
}

### Crear tarea sin descripción
POST {{apiUrl}}
Content-Type: application/json

{
  "title": "Tarea sin descripción",
  "priority": "medium"
}

### Crear tarea sin prioridad (usará default: medium)
POST {{apiUrl}}
Content-Type: application/json

{
  "title": "Tarea con prioridad por defecto"
}

###############################################
# VALIDACIONES - CREAR (deberían fallar)
###############################################

### Error: título muy corto
POST {{apiUrl}}
Content-Type: application/json

{
  "title": "AB",
  "priority": "high"
}

### Error: título muy largo
POST {{apiUrl}}
Content-Type: application/json

{
  "title": "Lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua ut enim ad minim veniam quis nostrud",
  "priority": "high"
}

### Error: prioridad inválida
POST {{apiUrl}}
Content-Type: application/json

{
  "title": "Tarea con prioridad incorrecta",
  "priority": "urgente"
}

### Error: sin título
POST {{apiUrl}}
Content-Type: application/json

{
  "description": "Tarea sin título",
  "priority": "high"
}

###############################################
# ACTUALIZAR TAREAS (PUT)
###############################################

### Actualizar tarea completa (ID 1)
PUT {{apiUrl}}/1
Content-Type: application/json

{
  "title": "Tarea actualizada",
  "description": "Descripción modificada",
  "completed": true,
  "priority": "low"
}

### Actualizar tarea (ID 2)
PUT {{apiUrl}}/2
Content-Type: application/json

{
  "title": "Estudiar para el examen FINAL",
  "description": "Repasar todo el temario",
  "completed": false,
  "priority": "high"
}

###############################################
# TOGGLE COMPLETADA (PATCH)
###############################################

### Alternar completada de tarea 1
PATCH {{apiUrl}}/1/toggle

### Alternar completada de tarea 2
PATCH {{apiUrl}}/2/toggle

### Alternar completada de tarea 3
PATCH {{apiUrl}}/3/toggle

###############################################
# ELIMINAR TAREAS (DELETE)
###############################################

### Eliminar tarea 5
DELETE {{apiUrl}}/5

### Eliminar tarea inexistente (debería dar 404)
DELETE {{apiUrl}}/999

###############################################
# FLUJO COMPLETO DE PRUEBA
###############################################

### 1. Ver todas las tareas iniciales
GET {{apiUrl}}

### 2. Crear nueva tarea
POST {{apiUrl}}
Content-Type: application/json

{
  "title": "Comprar café",
  "description": "Café en grano para la semana",
  "priority": "medium"
}

### 3. Ver todas las tareas (debería aparecer la nueva)
GET {{apiUrl}}

### 4. Marcar como completada (usa el ID de la tarea creada)
PATCH {{apiUrl}}/6/toggle

### 5. Verificar que se marcó como completada
GET {{apiUrl}}/6

### 6. Filtrar solo completadas
GET {{apiUrl}}?completed=true

### 7. Eliminar la tarea
DELETE {{apiUrl}}/6

### 8. Verificar que se eliminó (debería dar 404)
GET {{apiUrl}}/6